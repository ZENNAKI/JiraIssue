jQuery(function(){var defaultColor,openerElem,openerForm,acceptColor=function(color){jQuery("#colorVal").val(color)},ok=function(){jQuery(document.getElementById("preview")).val("true");openerElem.val(jQuery("#colorVal").val());jQuery("#"+openerElem.attr("name")+"-rep",openerForm).css({backgroundColor:jQuery("#colorVal").val()});window.close()},cancel=function(){openerElem.val(defaultColor);window.close()},getDefaultColor=function(){return jQuery("#colorpicker-params").find(".defaultcolor").text()},getOpenerElement=function(){var elemName=jQuery.trim(jQuery("#colorpicker-params").find(".openerelem").text());return jQuery(opener.document.jiraform[elemName])},getOpenerForm=function(){return jQuery(opener.document.jiraform)};return function(){defaultColor=getDefaultColor();openerElem=getOpenerElement();openerForm=getOpenerForm();jQuery(document).click(function(e){var targ=jQuery(e.target);if(targ.parent().hasClass("colorpicker-option")){acceptColor(targ.parent().attr("title"));e.preventDefault()}else{if(targ.hasClass("colorpicker-ok")){ok()}else{if(targ.hasClass("colorpicker-cancel")){cancel()}}}});jQuery(document).ready(function(){jQuery("#picker").submit(function(e){e.preventDefault()})})}}());