define("jira/dialog/error-dialog",["jira/dialog/dialog","jira/ajs/ajax/ajax-util","jira/lib/class","jira/util/browser","jquery"],function(Dialog,AjaxUtil,Class,Browser,$){var ErrorDialog=Class.extend({init:function(options){var message=options.message||AJS.I18n.getText("common.forms.ajax.servererror");var mode;if(!options.mode||["warning","error","info"].indexOf(options.mode)<0){mode="error"}else{mode=options.mode}this.dialog=new Dialog({id:"error-dialog",content:function(ready){var $el=$(JIRA.Templates.ErrorDialog.serverErrorModalDialog({message:message,mode:mode}));$el.find(".error-dialog-refresh").click(function(e){e.preventDefault();Browser.reloadViaWindowLocation()});ready($el)}});this.dialog.addHeading(AJS.I18n.getText("common.words.error"));this.dialog.handleCancel=$.noop},hide:function(){this.dialog.hide();return this},show:function(){this.dialog.show();return this}});ErrorDialog.openErrorDialogForXHR=function(xhr){return new ErrorDialog({message:AjaxUtil.getErrorMessageFromXHR(xhr)}).show()};return ErrorDialog});AJS.namespace("JIRA.ErrorDialog",null,require("jira/dialog/error-dialog"));