define("jira/ajs/control",["jira/lib/class","jquery"],function(Class,jQuery){return Class.extend({INVALID:"INVALID",_throwReadOnlyError:function(property){new Error(this.CLASS_SIGNATURE+": Sorry ["+property+"] is a read-only property")},_assignEvents:function(group,$target){this._unassignEvents(group,$target);if(typeof $target==="string"){for(var eventType in this._events[group]){jQuery(document).delegate($target,eventType,this._getDispatcher(group,eventType))}}else{$target=jQuery($target);for(eventType in this._events[group]){$target.bind(eventType,this._getDispatcher(group,eventType))}}return this},_unassignEvents:function(group,$target){if(typeof $target==="string"){for(var eventType in this._events[group]){jQuery(document).undelegate($target,eventType,this._getDispatcher(group,eventType))}}else{$target=jQuery($target);for(eventType in this._events[group]){$target.unbind(eventType,this._getDispatcher(group,eventType))}}},_getDispatcher:function(group,eventType){var ns=group+"/"+eventType;if(!this._dispatchers){this._dispatchers={}}if(!this._dispatchers[ns]){var handler=this._events[group][eventType];var instance=this;this._dispatchers[ns]=function(event){return handler.call(instance,event,jQuery(this))}}return this._dispatchers[ns]},_isValidInput:function(){return true},_handleKeyEvent:function(event){if(this._isValidInput(event)){if(event.type==="input"){if(typeof this.onEdit==="function"){this.onEdit(event)}}else{var heyHandler=this.keys&&this.keys[event.key];if(typeof heyHandler==="function"){heyHandler.call(this,event)}}}},getCustomEventName:function(methodName){return(this.CLASS_SIGNATURE||"")+"_"+methodName},_getCustomEventArgs:function(){return[this]},_supportsBoxShadow:function(){var s=document.body.style;return s.WebkitBoxShadow!==undefined||s.MozBoxShadow!==undefined||s.boxShadow!==undefined},_setOptions:function(options){var element,optionsFromDOM;options=options||{};if(options instanceof jQuery||typeof options==="string"||(typeof options==="object"&&options.nodeName)){options={element:options}}element=jQuery(options.element);optionsFromDOM=element.getOptionsFromAttributes();this.options=jQuery.extend(true,this._getDefaultOptions(options),optionsFromDOM,options);if(element.length===0){return this.INVALID}return undefined},getCaret:function(node){var startIndex=node.selectionStart;if(startIndex>=0){return(node.selectionEnd>startIndex)?-1:startIndex}if(document.selection){var textRange1=document.selection.createRange();if(textRange1.text.length===0){var textRange2=textRange1.duplicate();textRange2.moveToElementText(node);textRange2.setEndPoint("EndToStart",textRange1);return textRange2.text.length}}return -1},_render:function(){var i,name=arguments[0],args=[];for(i=1;i<arguments.length;i++){args.push(arguments[i])}return this._renders[name].apply(this,args)}})});AJS.namespace("AJS.Control",null,require("jira/ajs/control"));