define("jira/util/browser",["jira/util/elements","aui/params","jquery","exports"],function(Elements,params,jQuery,exports){exports.canAccessIframe=function canAccessIframe(iframe){var $iframe=jQuery(iframe);return !/^(http|https):\/\//.test($iframe.attr("src"))||(params.baseURL&&(jQuery.trim($iframe.attr("src")).indexOf(params.baseURL)===0))};function preventScrolling(e){var keyCode=e.keyCode,keys=jQuery.ui.keyCode;if(e.type=="keypress"){return }if(keyCode===keys.DOWN||keyCode===keys.UP||keyCode===keys.LEFT||keyCode===keys.RIGHT){var $el=jQuery(e.target);if(Elements.consumesKeyboardEvents($el)){}else{e.preventDefault()}}}exports.disableKeyboardScrolling=function disableKeyboardScrolling(){jQuery(document.body).bind("keydown",preventScrolling)};exports.enableKeyboardScrolling=function enableKeyboardScrolling(){jQuery(document.body).unbind("keydown",preventScrolling)};exports.isSelenium=function(){return window.name.toLowerCase().indexOf("selenium")>=0};exports.reloadViaWindowLocation=function reloadViaWindowLocation(url){exports.reloadViaWindowLocation._delegate(url,window.location)};exports.reloadViaWindowLocation._delegate=(function(){var secondsSinceMidnight=function(){var now=new Date();var midnight=new Date(now.getFullYear(),now.getMonth(),now.getDate(),0,0,0,0);var secs=(now.getTime()-midnight.getTime())/1000;return Math.max(Math.floor(secs),1)};var MAGIC_PARAM="jwupdated";var MAGIC_PARAM_RE=/(jwupdated=[0-9]*)/;var makeHashUrlsUnique=function(url){var hashIndex=url.indexOf("#");if(hashIndex==-1){return url}var firstQuestionMark=url.indexOf("?");var magicParamValue=MAGIC_PARAM+"="+secondsSinceMidnight();if(firstQuestionMark==-1){url=url.replace("#","?"+magicParamValue+"#")}else{if(MAGIC_PARAM_RE.test(url)){url=url.replace(MAGIC_PARAM_RE,magicParamValue)}else{url=url.replace("?","?"+magicParamValue+"&")}}return url};return function(url,location){var targetUrl=url||location.href;var uniqueUrl=makeHashUrlsUnique(targetUrl);if(targetUrl===location.href){location.replace(uniqueUrl)}else{location.assign(uniqueUrl)}}})()});